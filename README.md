# YdeBot
for BingYan Studio
# Day1
## **了解了API是什么**
一开始我还以为API是指的GUI（
## **了解了如何使用Flask**
明白了如何用http进行通信
## **实现了复读的内容**
# Day2
## **用正则表达式实现了内容的提取**
### （上午）
把内容提取写成了一个函数（functions.content_gen()），避免了重复的编码工作  
### （12：30）
突然发现直接存CQ码就行，亏我弄了一上午正则表达式（  
以后一定要先把API看清楚（  
## **实现了跨群图片库的功能，stage1已完成**
## **代码的重构（stage1 v2.0）**
### (14:30)
重构了一下代码，把变量全部转移到API里面了  
不过现在暂时还要先单独启动go-cqhttp.exe  
但是暂时还没有搞定模块化（
### （21:08）
把几个功能不同的类放在不同的文件里面了，不知道这算不算模块化（
# Day3
## 学会了MySql的基本语法，以及其与python的连接
### (11:01)
## 成功用数据库实现了群图片库功能（Stage2 v1.0）
### （15：38）
## 明白了如何用requests取得HTTP中的响应数据
btw之前以为白写了的content_gen现在居然在提取文件名时又发挥作用了，还好之前没有直接删掉（
## 实现了取消收藏的功能（Stage2 v2.0）
### (23:36)
## 实现了ban和unban的功能（Stage2 v3.0）

# Day4
### (2:00)
###### 不要问我为什么这么晚不睡（问就是写上头了）
## 实现了对发送图片数量的Rank统计，并可以用消息的形式发送Rank和对应的上传次数（Stage2 v4.0）
学到了MySql对数据的排序
### (11:30)
## 在Sql.py中实现了狼人杀项目中开房间（同时指定房间人数）、加入房间、删除房间的方法
进一步熟悉了MySql的语法
### (14:15)
## 在Sql.py实现了投票和淘汰的功能
但是游戏的主函数还没写好
### (17:26)
## 在Werewolf_kill.py中实现了基本的投票和淘汰功能（Stage3 v1.1）
实例化一个Werewolf_kill对象，再运行enter_room即可进行往房间里加人以及进行游戏的操作  
但是一些规则尚未完善  
还没有增加退出房间的功能
### (19:16)
## 实现了退出房间的功能（Stage3 v1.2）
## 修复了一个Bug:在退出房间后下一个进入的人id分配异常
### bug unsolved
群主退出房间之后应该把群删掉(留作下一步开发的记录)
### (21:02)
## 将enter_game()和game_start()里的循环改成了resp_to_data()以及game_progress()以便处理从message_handler中得到的信息(Stage3 v1.3)
### (22:40)
## Bugfix:群主退群会把群删掉
### (23:08)
## 开始将狼人杀连接到bot上
目前命令规则：  
开始狼人杀-建房 房号=xxxx,人数=xxxx,昵称=xxxx
开始狼人杀-加房 房号=xxxx,昵称=xxxx
开始游戏
结束狼人杀  
在以上两个命令之间，用户通过私聊输入给bot的数据都会被当成游戏中的命令
update:突然发现任务书要求的是群主顺延（  
这个锅迟点再修（
### (23:22)
开始处理角色部分的内容  
先传一个(Stage3 v1.4)  
werewolf.py已经可以正确响应传入的指令(投票)了，但是还没有接入bot

# Day5
### (17:41)
## 实现了游戏按阶段进行的功能(stage3 v1.5)
目前发现的bug:  
预言家死后仍可询问  
未实现的功能:  
为玩家分配角色并检验分配是否合理  
### (22:32)
## 修复了几处bug(stage3_v1.6)
1、修复了可以对已经出局的人进行操作的bug(包括主动投票和被动攻击)
2、修复了狼人/猎人发出杀死不存在的玩家的指令时不能正确处理的bug
### (23:20)
## 修bug
修好了当某阶段的角色全部死亡时游戏卡在此阶段的问题
### （8：10） 
## 发现bug
1、平票能判定，但游戏仍然进入下一个阶段  
2、猎人出局后没有开枪  
### (8:40)
修复了8：10发现的两个bug
### (10:00)
## 发现bug
群主重复申请开始游戏时的提示为“人数不足”(已修复)
### (10:06)
## 实现了游戏开始时角色的随机分配（stage3 v1.8）
### （15：15）
开始（真的）接入bot  
关于角色分配的输入格式：  
狼人=xxx,村民=xxx,猎人=xxx，预言家=xxx

### (17:11)
## 成功接入bot，并且能正确回复建房的消息（stage3 v2.0）
但还需进一步调试